<!-- Don't display any data unless user is signed in -->
<div *ngIf="user; else promptLogin">
    <div layout-gt-sm="row">
        <div flex-gt-sm="80" flex-offset-gt-sm="10">

            <div id="pageTitle">
                <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
                <mat-divider></mat-divider>
                <h3><i>This is the title</i></h3>

                <div id="filterDate">
                    <mat-form-field class="start">
                        <input
                            id = "startDate"
                            matInput [matDatepicker]="start"
                            placeholder="Choose a Start Date"
                            [(ngModel)]="startDate"
                            (input)="startDate = $event.target.value"
                            disabled>
                        <mat-datepicker-toggle id = "startButton" matSuffix [for]="start" enabled></mat-datepicker-toggle>
                        <mat-datepicker touchUi="true" #start disabled="false"></mat-datepicker>
                    </mat-form-field> &nbsp;

                    <mat-form-field class="end">
                        <input
                            id = "endDate"
                            matInput [matDatepicker]="end"
                            placeholder="Choose an End Date"
                            [(ngModel)]="endDate"
                            (input)="endDate = $event.target.value"
                            disabled>
                        <mat-datepicker-toggle id = "endButton" matSuffix [for]="end" enabled></mat-datepicker-toggle>
                        <mat-datepicker touchUi="true" #end disabled="false"></mat-datepicker>
                    </mat-form-field>

                    <button mat-raised-button id="filterButton" (click)="this.refreshEmojis()">View</button>
                </div>
            </div>

            <div id="tabs">
                <mat-tab-group #myTabGroup>
                    <mat-tab label="Graph Review">

                    </mat-tab>

                    <mat-tab label="List Review">
                        <mat-card class="reportscard">
                            <mat-card-title id="reports-title">Reports
                                <mat-select id="selector" placeholder="Select Mood" [(value)]="emojiMood">
                                    <mat-option value="">All Moods</mat-option>
                                    <mat-option value = 1>Angry</mat-option>
                                    <mat-option value = 2>Anxious</mat-option>
                                    <mat-option value = 3>Happy</mat-option>
                                    <mat-option value = 4>Meh</mat-option>
                                    <mat-option value = 5>Sad</mat-option>
                                </mat-select>
                            </mat-card-title>
                            <mat-divider></mat-divider>
                            <mat-card-content>
                                <mat-list *ngIf="emojis; else emojiError">
                                    <mat-list-item #elem class="emoji" [id]="emoji._id"
                                                   *ngFor="let emoji of this.filterEmojis(emojiMood,emojiIntensity)">
                                        <!--This gets an emoji image based on the mood that the user input when creating the emoji object-->
                                        <img matListAvatar src="assets/Emojis/{{emoji.mood}}/{{emoji.intensity}}.png"
                                             style="width: 48px; height: 48px">

                                        <!--
                                                                        <mat-panel-title id="test"><img src="assets/Emojis/{{emoji.mood}}.png" style="width: 24px; height: 24px"></mat-panel-title>
                                        -->

                                        <mat-card-title>{{getReadableDate(emoji.date)}}</mat-card-title>
                                    </mat-list-item>
                                </mat-list>

                                <ng-template #emojiError>
                                    <mat-error>
                                        There was a problem loading the data. Possibly the server is down or perhaps
                                        there are network
                                        issues.
                                    </mat-error>
                                    <mat-error>
                                        Please wait a bit and try again or start the server.
                                    </mat-error>
                                </ng-template>
                            </mat-card-content>
                        </mat-card>
                    </mat-tab>
                </mat-tab-group>
            </div>
        </div>
    </div>
</div>

<!-- What to display if the user isn't logged in -->
<ng-template #promptLogin>
    <img class="loginEmoji" src="https://image.flaticon.com/icons/svg/260/260205.svg" alt="Sunshine Journal">
    <p class="loginEmojiText">Please sign in with your google account to access Sunshine Journal</p>
</ng-template>
